import{j as e,N as p}from"./navbar.EbWA8F7h.js";import{r as n}from"./index.WxXIy71t.js";/* empty css                          *//* empty css                       */const j=()=>{const[a,l]=n.useState({name:"",email:"",password:"",password_confirmation:""}),s=t=>{l({...a,[t.target.name]:t.target.value})},[u,i]=n.useState(!1),[h,r]=n.useState(""),d=async t=>{if(t.preventDefault(),a.password!==a.password_confirmation){r("Passwords don't match");return}i(!0),r("");const m={commandId:crypto.randomUUID(),payload:{name:a.name,email:a.email,password:a.password}};try{const o=await fetch("http://localhost:3000/pages/api/_add_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m),credentials:"include"}),c=await o.json();o.status==="Username taken"?r("Email already in use"):(console.log("API response: ",c),window.location.href="/login")}catch(o){console.log("Failed to send registration command: ",o),r("Registration failed")}finally{i(!1)}};return e.jsxs("div",{className:"register-container",children:[e.jsx(p,{}),e.jsx("main",{children:e.jsxs("form",{className:"register-form",onSubmit:d,children:[e.jsx("h2",{children:"Create your SyncUp Account"}),e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:s,required:!0}),e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:s,required:!0}),e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:a.password,onChange:s,required:!0}),e.jsx("label",{htmlFor:"password_confirmation",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"password_confirmation",name:"password_confirmation",value:a.password_confirmation,onChange:s,required:!0}),e.jsx("button",{type:"submit",children:"Register"})]})})]})};export{j as default};
